async function loadInsights() {
    const container = document.getElementById('insights-container');
    if (!container) return;

    try {
        // Fetch the JSON index with cache-busting
        const res = await fetch('/insights.json?v=' + new Date().getTime());
        if (!res.ok) throw new Error("Index file not found");
        
        const posts = await res.json();

        // LOGIC: Map through ALL posts for the Archive page
        const htmlContent = posts.map(post => {
            const dateObj = new Date(post.date);
            const displayDate = dateObj.toLocaleDateString('en-US', { 
                month: 'short', 
                year: 'numeric' 
            }).toUpperCase();

            // Maintaining the EXACT Home1 structure for every entry
            return `
                <div style="border-bottom: 1px solid var(--ui-border);">
                    <div class="entry">
                        <div class="meta-spine">
                            ${displayDate} / ${post.is_external ? 'DISPATCH' : 'INSIGHT'}
                        </div>
                        <div class="item-body">
                            <h3 class="entry-title">
                                <a href="${post.url}" ${post.is_external ? 'target="_blank"' : ''} style="text-decoration:none; color:inherit;">
                                    ${post.title} ${post.is_external ? 'â†—' : ''}
                                </a>
                            </h3>
                            <p style="color: var(--text-muted); font-size: 1.1rem; max-width: 52ch; margin:0; line-height: 1.6;">
                                ${post.description}
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }).join('');

        container.innerHTML = htmlContent;
        
    } catch (e) {
        console.error("Archive Load Error:", e);
        container.innerHTML = '<div class="entry"><div class="meta-spine">ERROR</div><div>Archive synchronization failed.</div></div>';
    }
}
window.onload = loadInsights;
